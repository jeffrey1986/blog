# GCC简介

[TOC]

## GCC编译过程

gcc编译过程分为4个阶段：预处理->编译->汇编->链接。

### 预处理

预处理器（cpp）根据以字符#开头的命令（directives），修改原始的C程序。预处理的指令为-E

```f
gcc -E test.c -o test.i
```

### 编译

在这个阶段中，Gcc首先要检查代码的规范性、是否有语法错误等，以确定代码的实际要做的工作，在检查无误后，Gcc把代码翻译 成汇编语言。用户可以使用”-S”选项来进行查看，该选项只进行编译而不进行汇编，生成汇编代码。

```
gcc -S test.i -o test.s
```

### 汇编

汇编阶段是把编译阶段生成的”.s”文件转成目标文件。

```
gcc -c test.s -o test.o
```

### 链接

链接，生成可执行文件

```
gcc test.o -o test
```

## GCC常用编译参数

### -c

仅执行编译，不执行链接

### -o

指定生成的输出文件

### -O

编译优化:

-O0: 无优化

-O -O1: 基础级别优化

-O2: 更高一级的优化，一般程序推荐使用这个

-O3: 最高级别优化

更加详细的请参考：https://blog.csdn.net/boylinux/article/details/28986261

### -g

编译的时候产生调试信息

### -l(lmn中的l)

用来指定要链接的库， 后面紧跟库名，不留空格。

比如我们有库名为libtest.so, 那么可以这样链接：

```
-ltest
```

### -L

查找库的目录。比如libtest.so放在/tmp/libtest.so:

```
-L/tmp -ltest
```

### -I(大写的i)

GCC默认会从/usr/include中去找头文件，如果头文件不在/user/include中，那么就需要用-I去指定查找头文件的目录，比如

```
-I/myinclude
```

### -Wall

生成所有警告信息

### -w

关闭所有警告信息

### -Werror

把所有的警告都作为错误处理

### -v

### -shared

生成共享目标文件。总是与-fPIC一起使用。

### -fPIC

告诉编译器产生与位置无关代码(Position-Independent Code)

### -static

此选项将禁止使用动态库，所以，编译出来的东西，一般都很大，也不需要什么   动态连接库，就可以运行

### -m32

生成32位机器的汇编代码